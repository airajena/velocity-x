# ==================== APPLICATION ====================
spring.application.name=fraud-detection-service
server.port=9086
spring.main.allow-bean-definition-overriding=true

# ==================== DATABASE ====================
spring.datasource.url=jdbc:postgresql://localhost:5432/velocityx_fraud
spring.datasource.username=postgres
spring.datasource.password=root
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ==================== REDIS ====================
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=60000

# ==================== KAFKA ====================
spring.kafka.bootstrap-servers=localhost:9092

# Producer
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3
spring.kafka.producer.properties.enable.idempotence=true

# Consumer
spring.kafka.consumer.group-id=fraud-detection-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.properties.spring.json.trusted.packages=*
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.listener.ack-mode=manual

# Topics
kafka.topics.transaction-events=transaction.events
kafka.topics.wallet-events=wallet.events
kafka.topics.fraud-alerts=fraud.alerts
kafka.topics.fraud-dlq=fraud.dlq

# ==================== EUREKA CLIENT ====================
eureka.client.service-url.defaultZone=http://admin:admin@localhost:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.prefer-ip-address=true
eureka.instance.instance-id=${spring.application.name}:${random.value}

# ==================== SECURITY ====================
app.jwt.secret=5367566B59703373367639792F423F4528482B4D6251655468576D5A71347437

# ==================== FRAUD DETECTION RULES ====================
# Velocity Checks
fraud.rules.velocity.max-transactions-per-hour=10
fraud.rules.velocity.max-transactions-per-day=50
fraud.rules.velocity.max-amount-per-hour=10000
fraud.rules.velocity.max-amount-per-day=50000

# Amount Thresholds
fraud.rules.amount.high-risk-threshold=5000
fraud.rules.amount.medium-risk-threshold=1000
fraud.rules.amount.suspicious-threshold=10000

# Risk Scoring
fraud.rules.risk.high-risk-score=80
fraud.rules.risk.medium-risk-score=50
fraud.rules.risk.low-risk-score=20

# Geolocation
fraud.rules.geo.max-distance-km=500
fraud.rules.geo.time-window-minutes=30

# Device
fraud.rules.device.new-device-risk-score=30
fraud.rules.device.suspicious-device-risk-score=50

# ==================== ACTUATOR ====================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# ==================== DISTRIBUTED TRACING ====================
management.tracing.sampling.probability=1.0
management.zipkin.tracing.endpoint=http://localhost:9411/api/v2/spans

# ==================== LOGGING ====================
logging.level.root=INFO
logging.level.com.velocityx.fraud_detection_service=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
